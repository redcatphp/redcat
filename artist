#!/usr/bin/env php
<?php
if(!is_file('redcat.php'))
	throw new Exception('No RedCat installation found in the current directory, you can make one using composer with this command:"composer create-project redcatphp/redcatphp"');
$redcat = require_once 'redcat.php';
$application = $redcat->create(Symfony\Component\Console\Application::class);
$commandPaths = [
	REDCAT.'packages/redcatphp/framework/Artist'=>'RedCat\Framework\Artist',
];
if($redcat['artist.pluginDirsMap']){
	$commandPaths = array_merge($commandPaths,$redcat['artist.pluginDirsMap']);
}
foreach($commandPaths as $dir=>$ns){
	foreach(glob($dir.'/*.php') as $com){
		$class = $ns.'\\'.pathinfo($com,PATHINFO_FILENAME);
		$reflectionClass = new ReflectionClass($class);
		if($reflectionClass->IsInstantiable())
			$application->add($redcat->create($class));
	}
}
$application->run();